# Задача на редизайн интерфейса платформы менторинга

Документ задаёт объём редизайна: перечень экранов, меню и навигацию, основные компоненты и их состояния. При проектировании экранов и потоков опираться на [USER_JOURNEYS.md](USER_JOURNEYS.md), при визуале и компонентах — на [DESIGN_REQUIREMENTS.md](DESIGN_REQUIREMENTS.md).

**Результат редизайна:** единый визуальный стиль (палитра, типографика, сетка из DESIGN_REQUIREMENTS), общий хедер и навигация, переиспользуемые компоненты в описанных состояниях.

---

## 1. Перечень экранов приложения

Экранов вне этого списка в рамках редизайна не добавлять.

| Эран | URL | Доступ | Контент (кратко) |
|------|-----|--------|------------------|
| Вход | `/login` | Гость | Форма: email, пароль. Кнопка «Войти». Ссылка «Регистрация». |
| Регистрация | `/register` | Гость | **Выбор роли встроен в регистрацию** (см. п. 1.1 ниже). Форма: email, пароль, подтверждение пароля; выбор роли «Менти» или «Ментор» (на той же странице или отдельным шагом мастера). Кнопка «Зарегистрироваться». Ссылка «Уже есть аккаунт? Войти». После успешной регистрации — переход на `/onboarding` для дозаполнения профиля по выбранной роли. |
| Онбординг (дозаполнение профиля) | `/onboarding` | Авторизован без/с неполным профилем | Форма профиля по уже выбранной при регистрации роли: общие поля + поля роли (менити: цель/проблема, желаемая должность, статус поиска; ментор: теги, описание услуг, формат, приём заявок, комментарий к статусу, макс. менти). Кнопка «Сохранить». Редирект на главную после сохранения. |
| Главная | `/` | Менти, Ментор, Админ | Приветствие, быстрые ссылки по роли: каталог, избранное / заявки, **Мои менторы** или **Мои менти**, профиль; админ — переход в админ-панель и выход. |
| Каталог менторов | `/mentors` | Все | Хедер. Фильтры: специальность, **теги (подсветка при выборе в списке, не чекбоксы)** — см. п. 4.5, «Принимает заявки». Сетка карточек менторов. Пагинация. |
| Карточка ментора | `/mentors/:id` | Все | Аватар/инициалы, имя, специальность, уровень, описание, формат, теги, статус приёма (и комментарий при «не принимает»), кол-во в избранном. Кнопки по роли: для менти — «В избранное» / «В избранном», «Оставить заявку» (если ментор принимает заявки). |
| Форма заявки | `/mentors/:id/request` | Менти | Сводка по ментору. Поле «Сопроводительное письмо» (обязательное). Кнопки «Отправить», «Отмена». |
| Избранное | `/favorites` | Менти | Список избранных менторов (карточки). Пустое состояние + CTA «Перейти в каталог». |
| Мои заявки | `/requests/outgoing` | Менти | Список исходящих заявок: ментор, дата, статус, текст. Для статуса «принята» — ссылка на «Мои менторы». |
| Входящие заявки | `/requests/incoming` | Ментор | Список заявок: менти, дата, текст письма. Кнопки «Принять» / «Отклонить». Лимит «Активных менти: X из Y». |
| Мои менторы (менити) / Мои менти (ментор) | `/connections` | Менти, Ментор | Список активных связей: для менти — «мои менторы» (ментор, дата, контакты); для ментора — «мои менти» (менти, дата, контакты). Кнопка «Открепиться». Пустое состояние при отсутствии связей. |
| Профиль | `/profile` | Менти, Ментор | Редактирование профиля (общие + поля роли). Настройки уведомлений (вкл/выкл email). Кнопка «Сохранить». |
| Админ: теги | `/admin/tags` | Админ | Список тегов. Кнопка «Добавить». Создание/редактирование в модалке. |
| Админ: специальности | `/admin/specialties` | Админ | Список специальностей. Кнопка «Добавить». Создание/редактирование в модалке. |
| Админ: пользователи | `/admin/users` | Админ | Просмотр списка пользователей. |
| Страница не найдена | `/404`, `*` | Все | Сообщение 404, ссылка на главную или каталог. |

### 1.1. Выбор роли при регистрации

Роль выбирается **во время регистрации**, а не на отдельной странице онбординга.

- **Вариант A:** на странице `/register` после полей email и пароля — блок выбора роли («Менти» / «Ментор») перед кнопкой «Зарегистрироваться». Один экран: учётные данные + роль.
- **Вариант B:** регистрация как мастер из нескольких шагов (шаг 1: email, пароль; шаг 2: выбор роли; шаг 3 при необходимости: минимальные поля профиля). Навигация «Назад» / «Далее» или шаги сверху.

После успешной регистрации пользователь попадает на `/onboarding`, где видит форму **дозаполнения профиля** уже под выбранную роль (без повторного выбора роли). Если в будущем профиль можно будет сохранить сразу при регистрации, редирект может идти на главную.

---

## 2. Меню и навигация

### 2.1. Область приложения (не админка)

На всех экранах, кроме входа и регистрации, показывается **единый верхний хедер**.

- **Слева:** логотип (ссылка: для авторизованных — на `/`, для гостя — на `/mentors`).
- **Справа:** пункты меню + переключатель темы (иконка солнца/луны) + при авторизации кнопка/ссылка «Выйти».

**Состав пунктов по роли:**

| Роль | Пункты меню |
|------|-------------|
| Гость | Менторы \| Войти \| Регистрация |
| Менти | Менторы \| Избранное \| Мои заявки \| **Мои менторы** \| Профиль \| [тема] \| Выйти |
| Ментор | Менторы \| Заявки \| **Мои менти** \| Профиль \| [тема] \| Выйти |
| Админ | На главной — только переход «Админ-панель» и «Выйти». Внутри админки — отдельный layout (см. п. 2.2). |

«Заявки» у ментора ведёт на `/requests/incoming`. Названия разделов связей в меню: для менти — **«Мои менторы»**, для ментора — **«Мои менти»** (на экране `/connections` заголовок страницы тоже «Мои менторы» или «Мои менти» в зависимости от роли).

**Активный пункт:** выделение градиентом фона или подчёркиванием (по DESIGN_REQUIREMENTS). **Hover:** смена фона/цвета, плавный transition.

**Мобильная версия (до 640px):** бургер-иконка; по клику — выдвижная панель (drawer) с теми же пунктами и переключателем темы. Закрытие по клику вне панели или по переходу по ссылке.

### 2.2. Админ-панель

Для маршрутов `/admin/*` используется **отдельный layout**: свой хедер (например «Админ-панель» + ссылка «На главную») и **боковая навигация** (сайдбар): Теги \| Специальности \| Пользователи. Активный пункт выделяется по дизайн-системе. Контент — в основной области справа от сайдбара. На мобиле сайдбар — в выдвижную панель или коллапс.

### 2.3. Редиректы

- Неавторизованный пользователь на защищённой странице → `/login` с сохранением `from`.
- Авторизован, но профиль не заполнен или роль не выбрана → `/onboarding`.
- Загрузка профиля — индикатор «Загрузка...» без перехода.

---

## 3. Основные компоненты и их состояния

Цвета, размеры, скругления, тени — по [DESIGN_REQUIREMENTS.md](DESIGN_REQUIREMENTS.md).

### 3.1. Кнопка

- **Варианты:** primary (градиент teal–green), secondary (обводка или нейтральный фон; синий для «Отмена», «Настройки» по гайду), danger (отклонить, открепиться).
- **Состояния:** default, hover (scale 1.02 или усиление градиента), focus (кольцо), disabled (opacity, не кликабельна), loading (спиннер внутри, текст «Загрузка...» или иконка).
- Высота минимум 44px; padding, border-radius 8px — по DESIGN_REQUIREMENTS.

### 3.2. Поле ввода (Input, Textarea)

- **Default:** фон поверхности, граница из палитры. **Focus:** бордер/тень акцентного цвета.
- **Error:** красный бордер, под полем текст ошибки (--color-error).
- **Disabled:** визуально приглушённое, не редактируется. Подпись сверху; обязательные поля — звёздочка или «обязательно».

### 3.3. Карточка (Card)

- Базовый вид: фон поверхности, padding 24px, radius 8px, мягкая тень. Использование: карточка ментора в каталоге и на странице детали, блок заявки, блок связи, контейнер формы (логин, регистрация, форма заявки).
- Если карточка кликабельна (например ведёт на `/mentors/:id`): при hover — лёгкое поднятие тени (опционально).

### 3.4. Карточка ментора

- **Содержимое:** аватар (фото или инициалы), имя и фамилия, специальность, дата регистрации (опционально), теги (чипы), статус «Принимает заявки» / «Не принимает заявки», при необходимости «В избранном: N».
- **Действия по роли:**
  - **Менти:** «В избранное» / «В избранном» (toggle); «Оставить заявку» — только если ментор принимает заявки и нет активной связи и нет заявки в статусе «отправлена». При заявке на рассмотрении или при уже существующей связи — кнопка скрыта или неактивна с подсказкой.
  - **Ментор / гость:** кнопок «В избранное» и «Оставить заявку» нет; переход на деталь — по клику на карточку или по ссылке «Подробнее».

### 3.5. Теги в фильтрах каталога (не чекбоксы)

Фильтр по тегам на странице каталога менторов реализуется **не чекбоксами**, а списком тегов, которые **подсвечиваются при выборе**.

- Теги отображаются списком (или сеткой чипов). Клик по тегу переключает его состояние «выбран / не выбран».
- Выбранный тег визуально выделен (фон акцентного цвета или обводка, по DESIGN_REQUIREMENTS для чипов). Повторный клик снимает выбор.
- Множественный выбор: можно выбрать несколько тегов; фильтрация по каталогу учитывает выбранные теги (логика «любой из выбранных» или по бизнес-правилам).
- Не использовать чекбоксы рядом с каждым тегом — только подсветка самого тега в списке при выборе.

### 3.6. Чип / тег (отображение)

- **Назначение:** теги специализации на карточке ментора и в каталоге; статусы заявок (отправлена, принята, отклонена).
- **Вид:** pill (border-radius 9999px), небольшой padding; фон приглушённый или контур. Для статусов — семантика цветом: успех (принята), ошибка (отклонена), нейтральный/ожидание (отправлена).

### 3.7. Хедер (навигация)

- Состояния пунктов: default, hover, active (текущая страница). Переключатель темы: иконка солнца (в светлой теме) / луны (в тёмной); по клику — смена темы, сохранение в localStorage.
- Мобильное состояние: бургер открывает панель с пунктами и переключателем темы.

### 3.8. Модальное окно

- **Использование:** подтверждение принять/отклонить заявку; открепление (с полем «Причина»); создание/редактирование тега и специальности в админке.
- **Структура:** оверлей (полупрозрачный), контент по центру (карточка, radius 12px), заголовок, тело (форма или текст), кнопки «Подтвердить»/«Сохранить» (primary) и «Отмена»/«Отменить» (secondary). Обязательны focus trap и закрытие по Escape.

### 3.9. Toast

- Позиция: угол экрана (например справа сверху). Варианты: успех («Заявка отправлена», «Заявка принята», «Вы откреплены» и т.п.), ошибка (текст из API или маппинг). Авто-скрытие 3–5 сек. Фон поверхности, тень; при необходимости иконка успеха/ошибки.

### 3.10. Скелетон и спиннер

- Списки (каталог, заявки, связи, избранное): при загрузке — скелетон карточек или спиннер по центру. Не блокировать весь экран.
- Кнопки: при loading — спиннер внутри кнопки.

### 3.11. Пустое состояние (Empty state)

- Когда списков нет: иконка + заголовок + короткий текст + одна кнопка CTA. Примеры: избранное — «Пока никого нет», «Перейти в каталог»; **Мои менторы** / **Мои менти** — «Нет активных связей»; мои заявки / входящие — по смыслу.

### 3.12. Ошибки

- Формы: ошибки под полями, красным. Глобальные (сеть, 5xx): блок на экране с текстом и кнопкой «Повторить». Типовые тексты — по DESIGN_REQUIREMENTS (раздел 13).

---

## 4. Чек-лист для разработчика

- [ ] Все экраны из п. 1 реализованы; лишних экранов нет.
- [ ] Выбор роли встроен в регистрацию; онбординг — только дозаполнение профиля по выбранной роли.
- [ ] В меню и на экране связей: для менти — «Мои менторы», для ментора — «Мои менти».
- [ ] Глобальный хедер с навигацией по ролям и переключатель темы на всех страницах (кроме логина/регистрации).
- [ ] Админка: отдельный layout с сайдбаром (Теги, Специальности, Пользователи).
- [ ] Фильтр по тегам в каталоге: теги подсвечиваются при выборе в списке, без чекбоксов.
- [ ] Кнопки, поля, карточки, теги, модалки, toast, скелетоны и пустые состояния соответствуют п. 3 и DESIGN_REQUIREMENTS.
- [ ] Светлая и тёмная темы по палитре; выбор темы сохраняется.
- [ ] Адаптив: брейкпоинты и мобильное меню (бургер) по DESIGN_REQUIREMENTS.
- [ ] Редиректы и охраны маршрутов соответствуют USER_JOURNEYS (с учётом переноса выбора роли в регистрацию).
